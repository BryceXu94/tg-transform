"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vueParser=void 0;const compiler_sfc_1=require("@vue/compiler-sfc"),script_1=require("../script"),html_1=require("../html");class VueParser{parse(o){var e=(0,compiler_sfc_1.parse)(o);const p=e.descriptor.source;var t=e.descriptor.script||e.descriptor.scriptSetup;const c=t?.content,r=t?.loc,a=e.descriptor.template?.content,s=e.descriptor.template?.loc,f=[{type:"script",offset:{start:r?.start.offset||0,end:r?.end.offset||0}},{type:"template",offset:{start:s?.start.offset||0,end:s?.end.offset||0}}].sort((e,t)=>e.offset.start-t.offset.start);let i=0,d="",n=!1;return f.forEach((e,t)=>{var r,s;if(e.offset.start>i&&(d+=p.substring(i,e.offset.start),"template"===e.type?a&&({code:s,parsed:r}=html_1.htmlParser.parse(a),r?(d+=s,n=!0):d+=a,i=e.offset.end-1):"script"===e.type&&c&&({code:r,parsed:s}=script_1.scriptParser.parse(c),s?(d+=r,n=!0):d+=c,i=e.offset.end-1)),!n)return{code:o,parsed:n};t===f.length-1&&i!==p.length-1&&(d+=p.substring(i,p.length))}),{code:d,parsed:n}}}exports.vueParser=new VueParser;