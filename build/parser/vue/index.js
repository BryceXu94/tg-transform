"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.vueParser=void 0;const compiler_sfc_1=require("@vue/compiler-sfc"),script_1=require("../script"),html_1=require("../html");class VueParser{parse(e){e=(0,compiler_sfc_1.parse)(e);const s=e.descriptor.source;var t=e.descriptor.script||e.descriptor.scriptSetup;const o=t?.content,r=t?.loc,p=e.descriptor.template?.content,c=e.descriptor.template?.loc,f=[{type:"script",offset:{start:r?.start.offset||0,end:r?.end.offset||0}},{type:"template",offset:{start:c?.start.offset||0,end:c?.end.offset||0}}].sort((e,t)=>e.offset.start-t.offset.start);let a=0,i="";return f.forEach((e,t)=>{var r;e.offset.start>a&&(i+=s.substring(a,e.offset.start),"template"===e.type?p&&(r=html_1.htmlParser.parse(p),i+=r,a=e.offset.end-1):"script"===e.type&&o&&(r=script_1.scriptParser.parse(o),i+=r,a=e.offset.end-1)),t===f.length-1&&a!==s.length-1&&(i+=s.substring(a,s.length))}),i}}exports.vueParser=new VueParser;